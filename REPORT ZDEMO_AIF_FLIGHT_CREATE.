REPORT ZDEMO_AIF_FLIGHT_CREATE.
DATA :LS_FLIGHT_DATA TYPE ZDEMO_S_SPFLI_AIF_RAW,
      LV_MSGGUID     TYPE /AIF/SXMSSMGUID.
PARAMETERS: P_CARR TYPE SPFLI-CARRID OBLIGATORY DEFAULT 'AA'.

START-OF-SELECTION.
  SELECT SINGLE * FROM SPFLI INTO @DATA(LS_SPFLI) WHERE CARRID = @P_CARR.
  CASE SY-SUBRC.
    WHEN 0.
      LS_FLIGHT_DATA = LS_SPFLI.
      TRY.
          /AIF/CL_ENABLER_XML=>TRANSFER_TO_AIF(
            EXPORTING
              IS_ANY_STRUCTURE = LS_FLIGHT_DATA
              IV_QUEUE_NS      = 'ZDEMO'
              IV_QUEUE_NAME    = 'XML'
            IMPORTING
              EV_MSGGUID       = LV_MSGGUID ).
        CATCH /AIF/CX_INF_DET_BASE.
        CATCH /AIF/CX_ENABLER_BASE.
        CATCH /AIF/CX_AIF_ENGINE_NOT_FOUND.
        CATCH /AIF/CX_ERROR_HANDLING_GENERAL.
        CATCH /AIF/CX_AIF_ENGINE_BASE.
          WRITE: / 'AIF call error'.
      ENDTRY.
    WHEN OTHERS .
      MESSAGE 'Not Found' TYPE 'E'.
  ENDCASE.
